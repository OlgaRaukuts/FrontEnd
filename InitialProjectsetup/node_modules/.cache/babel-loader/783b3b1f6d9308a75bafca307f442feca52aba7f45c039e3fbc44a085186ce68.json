{"ast":null,"code":"const clientId = 'ed3ad78238e74a08a597d93c074d69dd';\nconst redirectUri = 'http://localhost:3000/';\nlet accessToken;\nconst Spotify = {\n  getAccessToken() {\n    if (accessToken) return accessToken;\n\n    // Check if access token is in URL\n    const tokenMatch = window.location.href.match(/access_token=([^&]*)/);\n    const expiresInMatch = window.location.href.match(/expires_in=([^&]*)/);\n    if (tokenMatch && expiresInMatch) {\n      accessToken = tokenMatch[1];\n      const expiresIn = Number(expiresInMatch[1]);\n\n      // Clear the token after it expires\n      window.setTimeout(() => accessToken = '', expiresIn * 1000);\n      // Clean the URL\n      window.history.pushState('Access Token', null, '/');\n      return accessToken;\n    } else {\n      // Redirect user to Spotify auth\n      const authUrl = 'https://accounts.spotify.com/authorize';\n      const scope = 'playlist-modify-public';\n      const responseType = 'token';\n      const redirect = `${authUrl}?client_id=${clientId}&response_type=${responseType}&scope=${scope}&redirect_uri=${encodeURIComponent(redirectUri)}`;\n      window.location = redirect;\n    }\n  },\n  async search(query) {\n    const token = Spotify.getAccessToken();\n    const endpoint = `https://api.spotify.com/v1/search?type=track&q=${encodeURIComponent(query)}`;\n    const response = await fetch(endpoint, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const jsonResponse = await response.json();\n    if (!jsonResponse.tracks) return [];\n    return jsonResponse.tracks.items.map(track => ({\n      id: track.id,\n      name: track.name,\n      artist: track.artists[0].name,\n      album: track.album.name,\n      uri: track.uri\n    }));\n  }\n};\nexport default Spotify;","map":{"version":3,"names":["clientId","redirectUri","accessToken","Spotify","getAccessToken","tokenMatch","window","location","href","match","expiresInMatch","expiresIn","Number","setTimeout","history","pushState","authUrl","scope","responseType","redirect","encodeURIComponent","search","query","token","endpoint","response","fetch","headers","Authorization","jsonResponse","json","tracks","items","map","track","id","name","artist","artists","album","uri"],"sources":["/Users/admin/Desktop/Olya/FrontEnd/jammming/src/components/Spotify.js"],"sourcesContent":["const clientId = 'ed3ad78238e74a08a597d93c074d69dd'; \nconst redirectUri = 'http://localhost:3000/';\nlet accessToken;\n\nconst Spotify = {\n  getAccessToken() {\n    if (accessToken) return accessToken;\n\n    // Check if access token is in URL\n    const tokenMatch = window.location.href.match(/access_token=([^&]*)/);\n    const expiresInMatch = window.location.href.match(/expires_in=([^&]*)/);\n\n    if (tokenMatch && expiresInMatch) {\n      accessToken = tokenMatch[1];\n      const expiresIn = Number(expiresInMatch[1]);\n\n      // Clear the token after it expires\n      window.setTimeout(() => accessToken = '', expiresIn * 1000);\n      // Clean the URL\n      window.history.pushState('Access Token', null, '/');\n\n      return accessToken;\n    } else {\n      // Redirect user to Spotify auth\n      const authUrl = 'https://accounts.spotify.com/authorize';\n      const scope = 'playlist-modify-public';\n      const responseType = 'token';\n\n      const redirect = `${authUrl}?client_id=${clientId}&response_type=${responseType}&scope=${scope}&redirect_uri=${encodeURIComponent(redirectUri)}`;\n      window.location = redirect;\n    }\n  },\n\n  async search(query) {\n    const token = Spotify.getAccessToken();\n    const endpoint = `https://api.spotify.com/v1/search?type=track&q=${encodeURIComponent(query)}`;\n    const response = await fetch(endpoint, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const jsonResponse = await response.json();\n    if (!jsonResponse.tracks) return [];\n\n    return jsonResponse.tracks.items.map(track => ({\n      id: track.id,\n      name: track.name,\n      artist: track.artists[0].name,\n      album: track.album.name,\n      uri: track.uri\n    }));\n  }\n  \n\n};\n\n\nexport default Spotify;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,kCAAkC;AACnD,MAAMC,WAAW,GAAG,wBAAwB;AAC5C,IAAIC,WAAW;AAEf,MAAMC,OAAO,GAAG;EACdC,cAAcA,CAAA,EAAG;IACf,IAAIF,WAAW,EAAE,OAAOA,WAAW;;IAEnC;IACA,MAAMG,UAAU,GAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,sBAAsB,CAAC;IACrE,MAAMC,cAAc,GAAGJ,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,oBAAoB,CAAC;IAEvE,IAAIJ,UAAU,IAAIK,cAAc,EAAE;MAChCR,WAAW,GAAGG,UAAU,CAAC,CAAC,CAAC;MAC3B,MAAMM,SAAS,GAAGC,MAAM,CAACF,cAAc,CAAC,CAAC,CAAC,CAAC;;MAE3C;MACAJ,MAAM,CAACO,UAAU,CAAC,MAAMX,WAAW,GAAG,EAAE,EAAES,SAAS,GAAG,IAAI,CAAC;MAC3D;MACAL,MAAM,CAACQ,OAAO,CAACC,SAAS,CAAC,cAAc,EAAE,IAAI,EAAE,GAAG,CAAC;MAEnD,OAAOb,WAAW;IACpB,CAAC,MAAM;MACL;MACA,MAAMc,OAAO,GAAG,wCAAwC;MACxD,MAAMC,KAAK,GAAG,wBAAwB;MACtC,MAAMC,YAAY,GAAG,OAAO;MAE5B,MAAMC,QAAQ,GAAG,GAAGH,OAAO,cAAchB,QAAQ,kBAAkBkB,YAAY,UAAUD,KAAK,iBAAiBG,kBAAkB,CAACnB,WAAW,CAAC,EAAE;MAChJK,MAAM,CAACC,QAAQ,GAAGY,QAAQ;IAC5B;EACF,CAAC;EAED,MAAME,MAAMA,CAACC,KAAK,EAAE;IAClB,MAAMC,KAAK,GAAGpB,OAAO,CAACC,cAAc,CAAC,CAAC;IACtC,MAAMoB,QAAQ,GAAG,kDAAkDJ,kBAAkB,CAACE,KAAK,CAAC,EAAE;IAC9F,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACF,QAAQ,EAAE;MACrCG,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUL,KAAK;MAChC;IACF,CAAC,CAAC;IACF,MAAMM,YAAY,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC1C,IAAI,CAACD,YAAY,CAACE,MAAM,EAAE,OAAO,EAAE;IAEnC,OAAOF,YAAY,CAACE,MAAM,CAACC,KAAK,CAACC,GAAG,CAACC,KAAK,KAAK;MAC7CC,EAAE,EAAED,KAAK,CAACC,EAAE;MACZC,IAAI,EAAEF,KAAK,CAACE,IAAI;MAChBC,MAAM,EAAEH,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC,CAACF,IAAI;MAC7BG,KAAK,EAAEL,KAAK,CAACK,KAAK,CAACH,IAAI;MACvBI,GAAG,EAAEN,KAAK,CAACM;IACb,CAAC,CAAC,CAAC;EACL;AAGF,CAAC;AAGD,eAAerC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}