{"ast":null,"code":"const clientId = 'ed3ad78238e74a08a597d93c074d69dd';\nconst redirectUri = 'http://127.0.0.1:3000';\nlet accessToken;\nconst Spotify = {\n  getAccessToken() {\n    if (accessToken) return accessToken;\n\n    // Check if access token is in URL\n    const tokenMatch = window.location.href.match(/access_token=([^&]*)/);\n    const expiresInMatch = window.location.href.match(/expires_in=([^&]*)/);\n    if (tokenMatch && expiresInMatch) {\n      accessToken = tokenMatch[1];\n      const expiresIn = Number(expiresInMatch[1]);\n\n      // Clear the token after it expires\n      window.setTimeout(() => accessToken = '', expiresIn * 1000);\n      // Clean the URL\n      window.history.pushState('Access Token', null, '/');\n      return accessToken;\n    } else {\n      // Redirect user to Spotify auth\n      const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=token&scope=playlist-modify-public&redirect_uri=${encodeURIComponent(redirectUri)}`;\n      const scope = 'playlist-modify-public';\n      const responseType = 'token';\n\n      // const redirect = `${authUrl}?client_id=${clientId}&response_type=${responseType}&scope=${scope}&redirect_uri=${encodeURIComponent(redirectUri)}`;\n      window.location = redirect;\n    }\n  },\n  async search(term) {\n    const token = Spotify.getAccessToken();\n    const response = await fetch(`https://api.spotify.com/v1/search?type=track&q=${encodeURIComponent(term)}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const jsonResponse = await response.json();\n    if (!jsonResponse.tracks) return [];\n    return jsonResponse.tracks.items.map(track => ({\n      id: track.id,\n      name: track.name,\n      artist: track.artists[0].name,\n      album: track.album.name,\n      uri: track.uri\n    }));\n  }\n};\nexport default Spotify;","map":{"version":3,"names":["clientId","redirectUri","accessToken","Spotify","getAccessToken","tokenMatch","window","location","href","match","expiresInMatch","expiresIn","Number","setTimeout","history","pushState","authUrl","encodeURIComponent","scope","responseType","redirect","search","term","token","response","fetch","headers","Authorization","jsonResponse","json","tracks","items","map","track","id","name","artist","artists","album","uri"],"sources":["/Users/admin/Desktop/Olya/FrontEnd/jammming/src/components/Spotify.js"],"sourcesContent":["const clientId = 'ed3ad78238e74a08a597d93c074d69dd'; \nconst redirectUri = 'http://127.0.0.1:3000';\nlet accessToken;\n\nconst Spotify = {\n  getAccessToken() {\n    if (accessToken) return accessToken;\n\n    // Check if access token is in URL\n    const tokenMatch = window.location.href.match(/access_token=([^&]*)/);\n    const expiresInMatch = window.location.href.match(/expires_in=([^&]*)/);\n\n    if (tokenMatch && expiresInMatch) {\n      accessToken = tokenMatch[1];\n      const expiresIn = Number(expiresInMatch[1]);\n\n      // Clear the token after it expires\n      window.setTimeout(() => accessToken = '', expiresIn * 1000);\n      // Clean the URL\n      window.history.pushState('Access Token', null, '/');\n\n      return accessToken;\n    } else {\n      // Redirect user to Spotify auth\n      const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=token&scope=playlist-modify-public&redirect_uri=${encodeURIComponent(redirectUri)}`;\n\n      const scope = 'playlist-modify-public';\n      const responseType = 'token';\n\n     // const redirect = `${authUrl}?client_id=${clientId}&response_type=${responseType}&scope=${scope}&redirect_uri=${encodeURIComponent(redirectUri)}`;\n      window.location = redirect;\n    }\n  },\n\n  async search(term) {\n    const token = Spotify.getAccessToken();\n    const response = await fetch(\n      `https://api.spotify.com/v1/search?type=track&q=${encodeURIComponent(term)}`,\n      {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }\n    );\n\n    const jsonResponse = await response.json();\n    if (!jsonResponse.tracks) return [];\n\n    return jsonResponse.tracks.items.map(track => ({\n      id: track.id,\n      name: track.name,\n      artist: track.artists[0].name,\n      album: track.album.name,\n      uri: track.uri\n    }));\n  }\n\n\n};\n\n\nexport default Spotify;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,kCAAkC;AACnD,MAAMC,WAAW,GAAG,uBAAuB;AAC3C,IAAIC,WAAW;AAEf,MAAMC,OAAO,GAAG;EACdC,cAAcA,CAAA,EAAG;IACf,IAAIF,WAAW,EAAE,OAAOA,WAAW;;IAEnC;IACA,MAAMG,UAAU,GAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,sBAAsB,CAAC;IACrE,MAAMC,cAAc,GAAGJ,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,oBAAoB,CAAC;IAEvE,IAAIJ,UAAU,IAAIK,cAAc,EAAE;MAChCR,WAAW,GAAGG,UAAU,CAAC,CAAC,CAAC;MAC3B,MAAMM,SAAS,GAAGC,MAAM,CAACF,cAAc,CAAC,CAAC,CAAC,CAAC;;MAE3C;MACAJ,MAAM,CAACO,UAAU,CAAC,MAAMX,WAAW,GAAG,EAAE,EAAES,SAAS,GAAG,IAAI,CAAC;MAC3D;MACAL,MAAM,CAACQ,OAAO,CAACC,SAAS,CAAC,cAAc,EAAE,IAAI,EAAE,GAAG,CAAC;MAEnD,OAAOb,WAAW;IACpB,CAAC,MAAM;MACL;MACA,MAAMc,OAAO,GAAG,oDAAoDhB,QAAQ,kEAAkEiB,kBAAkB,CAAChB,WAAW,CAAC,EAAE;MAE/K,MAAMiB,KAAK,GAAG,wBAAwB;MACtC,MAAMC,YAAY,GAAG,OAAO;;MAE7B;MACCb,MAAM,CAACC,QAAQ,GAAGa,QAAQ;IAC5B;EACF,CAAC;EAED,MAAMC,MAAMA,CAACC,IAAI,EAAE;IACjB,MAAMC,KAAK,GAAGpB,OAAO,CAACC,cAAc,CAAC,CAAC;IACtC,MAAMoB,QAAQ,GAAG,MAAMC,KAAK,CAC1B,kDAAkDR,kBAAkB,CAACK,IAAI,CAAC,EAAE,EAC5E;MACEI,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUJ,KAAK;MAChC;IACF,CACF,CAAC;IAED,MAAMK,YAAY,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC1C,IAAI,CAACD,YAAY,CAACE,MAAM,EAAE,OAAO,EAAE;IAEnC,OAAOF,YAAY,CAACE,MAAM,CAACC,KAAK,CAACC,GAAG,CAACC,KAAK,KAAK;MAC7CC,EAAE,EAAED,KAAK,CAACC,EAAE;MACZC,IAAI,EAAEF,KAAK,CAACE,IAAI;MAChBC,MAAM,EAAEH,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC,CAACF,IAAI;MAC7BG,KAAK,EAAEL,KAAK,CAACK,KAAK,CAACH,IAAI;MACvBI,GAAG,EAAEN,KAAK,CAACM;IACb,CAAC,CAAC,CAAC;EACL;AAGF,CAAC;AAGD,eAAepC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}